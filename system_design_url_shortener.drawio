<mxfile host="app.diagrams.net" modified="2023-12-22T17:52:50.688Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36" etag="QobMf1p-KWLzszw7XiFl" version="22.1.11" type="device">
  <diagram name="Page-1" id="ZZSd4HM62RbX2c47QIu4">
    <mxGraphModel dx="988" dy="527" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-18" value="" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="565" y="345" width="95" height="40" as="geometry" />
        </mxCell>
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-1" value="Questions:&lt;br&gt;1. How long to keep?&lt;br&gt;2. Traffic? How many users/URLs per day?&lt;br&gt;3. Characters&amp;nbsp; limitation in URL. Special characters might be hard to remember as well as capitalization.&lt;br&gt;4. Can URL be updated?&lt;br&gt;5. Can user submit own name?&lt;br&gt;6. No concept of ownership?&lt;br&gt;7. Authentication?" style="rounded=0;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="1">
          <mxGeometry width="260" height="150" as="geometry" />
        </mxCell>
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="7qGTJKBD6qKdbUM0u3QY-2" target="7qGTJKBD6qKdbUM0u3QY-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-2" value="Clients" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="500" y="130" width="90" height="40" as="geometry" />
        </mxCell>
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-31" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="7qGTJKBD6qKdbUM0u3QY-3" target="7qGTJKBD6qKdbUM0u3QY-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-3" value="URL Shortener" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="630" y="130" width="95" height="40" as="geometry" />
        </mxCell>
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-5" value="DB" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=7.285714285714249;" vertex="1" parent="1">
          <mxGeometry x="750" y="110" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-7" value="API:&lt;br&gt;1. Create short URL:&lt;br&gt;&lt;div style=&quot;&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;POST api/v1/url/shorten&lt;br&gt;{&lt;br&gt;&amp;nbsp; &quot;originalUrl&quot;: &quot;www.amazon.com/.../../..&quot;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;&amp;nbsp; &quot;userId&quot; [optional]&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;}&lt;/font&gt;&lt;br&gt;&lt;font face=&quot;Courier New&quot;&gt;Response:&lt;/font&gt;&lt;br&gt;&lt;font face=&quot;Courier New&quot;&gt;{&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;&amp;nbsp; &quot;shortUrl&quot;: &quot;https://www.example.com/abcde123&quot;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;}&lt;/font&gt;&lt;br&gt;&lt;br&gt;2. Resolve URL&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;GET&amp;nbsp;&lt;/font&gt;&lt;font face=&quot;Courier New&quot;&gt;api/v1/url/abcde123&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span data-darkreader-inline-bgcolor=&quot;&quot; style=&quot;background-color: rgb(255, 255, 0); --darkreader-inline-bgcolor: #999900;&quot;&gt;Redirects 301, 302 to &quot;www.amazon.com/.../../..&quot;&lt;/span&gt;&lt;br&gt;&lt;br&gt;3. Get info for URL&lt;br&gt;&lt;div data-darkreader-inline-border=&quot;&quot; style=&quot;border-color: var(--border-color); --darkreader-inline-border: var(--darkreader-border--border-color);&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;GET&amp;nbsp;api/v1/abcde123/metadata&lt;/font&gt;&lt;/div&gt;&lt;div data-darkreader-inline-border=&quot;&quot; style=&quot;border-color: var(--border-color); --darkreader-inline-border: var(--darkreader-border--border-color);&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;{&lt;/font&gt;&lt;/div&gt;&lt;div data-darkreader-inline-border=&quot;&quot; style=&quot;border-color: var(--border-color); --darkreader-inline-border: var(--darkreader-border--border-color);&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;&amp;nbsp; &quot;createdAt&quot;: timestamp&lt;br data-darkreader-inline-border=&quot;&quot; style=&quot;border-color: var(--border-color); --darkreader-inline-border: var(--darkreader-border--border-color);&quot;&gt;&lt;/font&gt;&lt;/div&gt;&lt;div data-darkreader-inline-border=&quot;&quot; style=&quot;border-color: var(--border-color); --darkreader-inline-border: var(--darkreader-border--border-color);&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;&amp;nbsp; &quot;expiresAt&quot;: timestamp&lt;/font&gt;&lt;/div&gt;&lt;div data-darkreader-inline-border=&quot;&quot; style=&quot;border-color: var(--border-color); --darkreader-inline-border: var(--darkreader-border--border-color);&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;&amp;nbsp; &quot;createdBy&quot;: userId&lt;/font&gt;&lt;/div&gt;&lt;div data-darkreader-inline-border=&quot;&quot; style=&quot;border-color: var(--border-color); --darkreader-inline-border: var(--darkreader-border--border-color);&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;}&lt;/font&gt;&lt;/div&gt;&lt;div data-darkreader-inline-border=&quot;&quot; style=&quot;border-color: var(--border-color); --darkreader-inline-border: var(--darkreader-border--border-color);&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div data-darkreader-inline-border=&quot;&quot; style=&quot;border-color: var(--border-color); --darkreader-inline-border: var(--darkreader-border--border-color);&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;4. Add new vanity URL:&lt;br&gt;[POST ]long URL, userID, vanity URL -&amp;gt; status&lt;br&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div data-darkreader-inline-border=&quot;&quot; style=&quot;border-color: var(--border-color); --darkreader-inline-border: var(--darkreader-border--border-color);&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;5. Update URL:&lt;br&gt;[PATCH] long URL, userID, updated long URL -&amp;gt; status, existing short URL&lt;/font&gt;&lt;/div&gt;&lt;div data-darkreader-inline-border=&quot;&quot; style=&quot;border-color: var(--border-color); --darkreader-inline-border: var(--darkreader-border--border-color);&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;&lt;br&gt;6. Delete URL&lt;/font&gt;&lt;/div&gt;&lt;div data-darkreader-inline-border=&quot;&quot; style=&quot;border-color: var(--border-color); --darkreader-inline-border: var(--darkreader-border--border-color);&quot;&gt;[DELETE] long URL, userID -&amp;gt; status&lt;/div&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="1">
          <mxGeometry y="150" width="390" height="500" as="geometry" />
        </mxCell>
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-8" value="26 letters: a-z&lt;br&gt;26 letters: A-Z&lt;br&gt;10 digits: 0-9&lt;br&gt;62 total chars =&amp;gt; 62^x&lt;br&gt;1) x=6 =&amp;gt;&amp;nbsp;56.800.235.584&lt;br&gt;2) x=7 =&amp;gt;&amp;nbsp;3.521.614.606.208" style="rounded=0;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="1">
          <mxGeometry x="260" width="220" height="110" as="geometry" />
        </mxCell>
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="7qGTJKBD6qKdbUM0u3QY-11" target="7qGTJKBD6qKdbUM0u3QY-19">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-11" value="Clients" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="430" y="200" width="90" height="40" as="geometry" />
        </mxCell>
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-16" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="7qGTJKBD6qKdbUM0u3QY-13" target="7qGTJKBD6qKdbUM0u3QY-15">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-13" value="URL Shortener&lt;br&gt;Servers" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="555" y="335" width="95" height="40" as="geometry" />
        </mxCell>
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-14" value="DB" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=7.285714285714249;" vertex="1" parent="1">
          <mxGeometry x="665" y="385" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-17" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="7qGTJKBD6qKdbUM0u3QY-13" target="7qGTJKBD6qKdbUM0u3QY-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-15" value="Cache" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="555" y="425" width="95" height="40" as="geometry" />
        </mxCell>
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-23" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="7qGTJKBD6qKdbUM0u3QY-19" target="7qGTJKBD6qKdbUM0u3QY-22">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-30" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="7qGTJKBD6qKdbUM0u3QY-19" target="7qGTJKBD6qKdbUM0u3QY-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-19" value="Load Balancer" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="580" y="240" width="65" height="40" as="geometry" />
        </mxCell>
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-22" value="Authentication&lt;br&gt;Service" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="435" y="335" width="90" height="40" as="geometry" />
        </mxCell>
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-25" value="Analytics" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="435" y="435" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-26" value="Short URL generation:&lt;br&gt;Unique ID convert to Base36 / Base 62&lt;br&gt;&lt;br&gt;OR&lt;br&gt;&lt;br&gt;Use hash function (CRC32, MD5, SHA-1), cut and resolve collisions." style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="480" width="245" height="110" as="geometry" />
        </mxCell>
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-27" value="From Frank Kane: &quot;Everything can be handled by the same fleet of servers.&amp;nbsp;&lt;br&gt;&lt;br&gt;We start with all of the clients&amp;nbsp;&lt;span data-darkreader-inline-color=&quot;&quot; data-darkreader-inline-bgcolor=&quot;&quot; style=&quot;background-color: initial; color: rgb(0, 0, 0); --darkreader-inline-bgcolor: initial; --darkreader-inline-color: #e8e6e3;&quot;&gt;out on the Internet on their desktops&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0); --darkreader-inline-color: #e8e6e3;&quot; data-darkreader-inline-color=&quot;&quot;&gt;or phones or whatever, anything with a web browser.&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0); --darkreader-inline-color: #e8e6e3;&quot; data-darkreader-inline-color=&quot;&quot;&gt;And we&#39;ll use some sort of a load balancer&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0); --darkreader-inline-color: #e8e6e3;&quot; data-darkreader-inline-color=&quot;&quot;&gt;to distribute requests&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0); --darkreader-inline-color: #e8e6e3;&quot; data-darkreader-inline-color=&quot;&quot;&gt;to a fleet of application servers,&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0); --darkreader-inline-color: #e8e6e3;&quot; data-darkreader-inline-color=&quot;&quot;&gt;which handle all of the API&#39;s&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0); --darkreader-inline-color: #e8e6e3;&quot; data-darkreader-inline-color=&quot;&quot;&gt;that we just talked about.&lt;br&gt;&lt;/span&gt;&lt;br&gt;&lt;div&gt;Assuming this service is rolled out globally,&amp;nbsp;&lt;span data-darkreader-inline-color=&quot;&quot; data-darkreader-inline-bgcolor=&quot;&quot; style=&quot;background-color: initial; color: rgb(0, 0, 0); --darkreader-inline-bgcolor: initial; --darkreader-inline-color: #e8e6e3;&quot;&gt;we&#39;ll need to do some sort of DNS trick&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0); --darkreader-inline-color: #e8e6e3;&quot; data-darkreader-inline-color=&quot;&quot;&gt;to geo-route requests&amp;nbsp;&lt;/span&gt;&lt;span data-darkreader-inline-bgcolor=&quot;&quot; style=&quot;background-color: initial; color: rgb(0, 0, 0); --darkreader-inline-color: #e8e6e3; --darkreader-inline-bgcolor: initial;&quot; data-darkreader-inline-color=&quot;&quot;&gt;to servers in the appropriate region,&amp;nbsp;&lt;/span&gt;&lt;span data-darkreader-inline-bgcolor=&quot;&quot; style=&quot;background-color: initial; color: rgb(0, 0, 0); --darkreader-inline-color: #e8e6e3; --darkreader-inline-bgcolor: initial;&quot; data-darkreader-inline-color=&quot;&quot;&gt;and I am assuming we have capacity spread out&amp;nbsp;&lt;/span&gt;&lt;span data-darkreader-inline-bgcolor=&quot;&quot; style=&quot;background-color: initial; color: rgb(0, 0, 0); --darkreader-inline-color: #e8e6e3; --darkreader-inline-bgcolor: initial;&quot; data-darkreader-inline-color=&quot;&quot;&gt;between regions, data centers, and racks&amp;nbsp;&lt;/span&gt;&lt;span data-darkreader-inline-bgcolor=&quot;&quot; style=&quot;background-color: initial; color: rgb(0, 0, 0); --darkreader-inline-color: #e8e6e3; --darkreader-inline-bgcolor: initial;&quot; data-darkreader-inline-color=&quot;&quot;&gt;in such a way that we have redundancy i&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0); --darkreader-inline-color: #e8e6e3;&quot; data-darkreader-inline-color=&quot;&quot;&gt;n the event a rack or data center goes down.&amp;nbsp;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0); --darkreader-inline-color: #e8e6e3;&quot; data-darkreader-inline-color=&quot;&quot;&gt;&lt;br&gt;Every request we talked about,&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0); --darkreader-inline-color: #e8e6e3;&quot; data-darkreader-inline-color=&quot;&quot;&gt;will require one or more database accesses,&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0); --darkreader-inline-color: #e8e6e3;&quot; data-darkreader-inline-color=&quot;&quot;&gt;so we will probably want something scalable&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0); --darkreader-inline-color: #e8e6e3;&quot; data-darkreader-inline-color=&quot;&quot;&gt;on the database side.&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0); --darkreader-inline-color: #e8e6e3;&quot; data-darkreader-inline-color=&quot;&quot;&gt;Any NoSQL sort of solution should do;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0); --darkreader-inline-color: #e8e6e3;&quot; data-darkreader-inline-color=&quot;&quot;&gt;eventual consistency is probably OK&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0); --darkreader-inline-color: #e8e6e3;&quot; data-darkreader-inline-color=&quot;&quot;&gt;for what we are doing I think,&amp;nbsp;&lt;/span&gt;&lt;span data-darkreader-inline-color=&quot;&quot; data-darkreader-inline-bgcolor=&quot;&quot; style=&quot;background-color: initial; color: rgb(0, 0, 0); --darkreader-inline-bgcolor: initial; --darkreader-inline-color: #e8e6e3;&quot;&gt;so if we need to make tradeoffs&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0); --darkreader-inline-color: #e8e6e3;&quot; data-darkreader-inline-color=&quot;&quot;&gt;it should probably be that.&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0); --darkreader-inline-color: #e8e6e3;&quot; data-darkreader-inline-color=&quot;&quot;&gt;DynamoDB, whatever is economical.&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 0, 0); --darkreader-inline-color: #e8e6e3;&quot; data-darkreader-inline-color=&quot;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 0, 0); --darkreader-inline-color: #e8e6e3;&quot; data-darkreader-inline-color=&quot;&quot;&gt;But we will want to cache it with Memcached or Redis,&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0); --darkreader-inline-color: #e8e6e3;&quot; data-darkreader-inline-color=&quot;&quot;&gt;whichever is available and whatever&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0); --darkreader-inline-color: #e8e6e3;&quot; data-darkreader-inline-color=&quot;&quot;&gt;we are familiar with.&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0); --darkreader-inline-color: #e8e6e3;&quot; data-darkreader-inline-color=&quot;&quot;&gt;Hitting disk for every request&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0); --darkreader-inline-color: #e8e6e3;&quot; data-darkreader-inline-color=&quot;&quot;&gt;would be a very bad idea;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0); --darkreader-inline-color: #e8e6e3;&quot; data-darkreader-inline-color=&quot;&quot;&gt;the URL mappings aren&#39;t gonna&amp;nbsp;&lt;/span&gt;&lt;span data-darkreader-inline-color=&quot;&quot; data-darkreader-inline-bgcolor=&quot;&quot; style=&quot;background-color: initial; color: rgb(0, 0, 0); --darkreader-inline-bgcolor: initial; --darkreader-inline-color: #e8e6e3;&quot;&gt;be changing very much if at all,&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0); --darkreader-inline-color: #e8e6e3;&quot; data-darkreader-inline-color=&quot;&quot;&gt;so they can be cached for a very long time.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 0, 0); --darkreader-inline-color: #e8e6e3;&quot; data-darkreader-inline-color=&quot;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span data-darkreader-inline-color=&quot;&quot; data-darkreader-inline-bgcolor=&quot;&quot; style=&quot;background-color: initial; color: rgb(0, 0, 0); --darkreader-inline-bgcolor: initial; --darkreader-inline-color: #e8e6e3;&quot;&gt;Data schema.&amp;nbsp;&lt;/span&gt;&lt;span data-darkreader-inline-color=&quot;&quot; data-darkreader-inline-bgcolor=&quot;&quot; style=&quot;background-color: initial; color: rgb(0, 0, 0); --darkreader-inline-bgcolor: initial; --darkreader-inline-color: #e8e6e3;&quot;&gt;All we need is an ID, which would be the primary key,&amp;nbsp;&lt;/span&gt;&lt;span data-darkreader-inline-color=&quot;&quot; data-darkreader-inline-bgcolor=&quot;&quot; style=&quot;background-color: initial; color: rgb(0, 0, 0); --darkreader-inline-bgcolor: initial; --darkreader-inline-color: #e8e6e3;&quot;&gt;and the short URL created&amp;nbsp;&lt;/span&gt;&lt;span data-darkreader-inline-color=&quot;&quot; data-darkreader-inline-bgcolor=&quot;&quot; style=&quot;background-color: initial; color: rgb(0, 0, 0); --darkreader-inline-bgcolor: initial; --darkreader-inline-color: #e8e6e3;&quot;&gt;by base-36 encoding that ID,&amp;nbsp;&lt;/span&gt;&lt;span data-darkreader-inline-color=&quot;&quot; data-darkreader-inline-bgcolor=&quot;&quot; style=&quot;background-color: initial; color: rgb(0, 0, 0); --darkreader-inline-bgcolor: initial; --darkreader-inline-color: #e8e6e3;&quot;&gt;and then the long URL it maps to,&amp;nbsp;&lt;/span&gt;&lt;span data-darkreader-inline-color=&quot;&quot; data-darkreader-inline-bgcolor=&quot;&quot; style=&quot;background-color: initial; color: rgb(0, 0, 0); --darkreader-inline-bgcolor: initial; --darkreader-inline-color: #e8e6e3;&quot;&gt;and the user ID, if any, of who owns that mapping&amp;nbsp;&lt;/span&gt;&lt;span data-darkreader-inline-color=&quot;&quot; data-darkreader-inline-bgcolor=&quot;&quot; style=&quot;background-color: initial; color: rgb(0, 0, 0); --darkreader-inline-bgcolor: initial; --darkreader-inline-color: #e8e6e3;&quot;&gt;and who can modify or delete it later.&amp;nbsp;&lt;/span&gt;&lt;span data-darkreader-inline-color=&quot;&quot; data-darkreader-inline-bgcolor=&quot;&quot; style=&quot;background-color: initial; color: rgb(0, 0, 0); --darkreader-inline-bgcolor: initial; --darkreader-inline-color: #e8e6e3;&quot;&gt;In the case of a vanity URL,&amp;nbsp;&lt;/span&gt;&lt;span data-darkreader-inline-color=&quot;&quot; data-darkreader-inline-bgcolor=&quot;&quot; style=&quot;background-color: initial; color: rgb(0, 0, 0); --darkreader-inline-bgcolor: initial; --darkreader-inline-color: #e8e6e3;&quot;&gt;the short URL would be what is specified.&amp;nbsp;&lt;br&gt;&lt;/span&gt;&lt;span data-darkreader-inline-color=&quot;&quot; data-darkreader-inline-bgcolor=&quot;&quot; style=&quot;background-color: initial; color: rgb(0, 0, 0); --darkreader-inline-bgcolor: initial; --darkreader-inline-color: #e8e6e3;&quot;&gt;&lt;br&gt;Now the most frequent operation will be&amp;nbsp;&lt;/span&gt;&lt;span data-darkreader-inline-color=&quot;&quot; data-darkreader-inline-bgcolor=&quot;&quot; style=&quot;background-color: initial; color: rgb(0, 0, 0); --darkreader-inline-bgcolor: initial; --darkreader-inline-color: #e8e6e3;&quot;&gt;&quot;remap this short URL to this long URL&quot;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span data-darkreader-inline-color=&quot;&quot; data-darkreader-inline-bgcolor=&quot;&quot; style=&quot;background-color: initial; color: rgb(0, 0, 0); --darkreader-inline-bgcolor: initial; --darkreader-inline-color: #e8e6e3;&quot;&gt;so we will definitely need an index&amp;nbsp;&lt;/span&gt;&lt;span data-darkreader-inline-color=&quot;&quot; data-darkreader-inline-bgcolor=&quot;&quot; style=&quot;background-color: initial; color: rgb(0, 0, 0); --darkreader-inline-bgcolor: initial; --darkreader-inline-color: #e8e6e3;&quot;&gt;on short URL&#39;s and they should be unique.&amp;nbsp;&lt;/span&gt;&lt;span data-darkreader-inline-color=&quot;&quot; data-darkreader-inline-bgcolor=&quot;&quot; style=&quot;background-color: initial; color: rgb(0, 0, 0); --darkreader-inline-bgcolor: initial; --darkreader-inline-color: #e8e6e3;&quot;&gt;Editing mappings will require&amp;nbsp;&lt;/span&gt;&lt;span data-darkreader-inline-color=&quot;&quot; data-darkreader-inline-bgcolor=&quot;&quot; style=&quot;background-color: initial; color: rgb(0, 0, 0); --darkreader-inline-bgcolor: initial; --darkreader-inline-color: #e8e6e3;&quot;&gt;looking them up by the long URL,&lt;/span&gt;&lt;/div&gt;&lt;span data-darkreader-inline-bgcolor=&quot;&quot; style=&quot;background-color: initial; --darkreader-inline-bgcolor: initial;&quot;&gt;so we&#39;ll also want an index on that.&lt;/span&gt;&amp;nbsp;&quot;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="1">
          <mxGeometry x="390" y="480" width="430" height="490" as="geometry" />
        </mxCell>
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-28" value="" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="540" y="200" width="40" height="30" as="geometry" />
        </mxCell>
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-32" value="1" style="text;html=1;strokeColor=#d6b656;fillColor=#fff2cc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;glass=0;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="240" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-33" value="2" style="text;html=1;strokeColor=#d6b656;fillColor=#fff2cc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;glass=0;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="460" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-34" value="4" style="text;html=1;strokeColor=#d6b656;fillColor=#fff2cc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;glass=0;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="705" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-35" value="3" style="text;html=1;strokeColor=#d6b656;fillColor=#fff2cc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;glass=0;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="370" y="150" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-36" value="4" style="text;html=1;strokeColor=#d6b656;fillColor=#fff2cc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;glass=0;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="480" y="130" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-37" value="5" style="text;html=1;strokeColor=#d6b656;fillColor=#fff2cc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;glass=0;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="410" y="200" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="7qGTJKBD6qKdbUM0u3QY-38" value="5" style="text;html=1;strokeColor=#d6b656;fillColor=#fff2cc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;glass=0;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="800" y="480" width="20" height="20" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
